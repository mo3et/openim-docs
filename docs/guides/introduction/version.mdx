---
title: '版本说明'
hide_title: true
sidebar_position: 4
---

# 版本说明

**OpenIMSDK** 长期维护的版本包括：

- **SDK** v3.8 系列
- **Server** v3.8 系列
- **Chat** v1.8 系列

在同一大版本内，不同小版本之间数据兼容。我们建议您升级到最新的子版本，升级时请使用 **tag** 以确保版本的准确性和稳定性。

由于维护资源有限，其他版本将不再得到支持。请各位用户尽快完成升级，以享受最新的功能和优化。

## 当前最新稳定版本

- **Server**: v3.8.3-patch.3
- **SDK**: v3.8.3-patch.3
- **Chat**: v1.8.4-patch.2

---

# 版本更新日志

# v3.8.3-patch (2025-3-7)

## Server v3.8.3-patch.3 更新内容

| **类别**     | **内容**                                                                       |
| ------------ | ------------------------------------------------------------------------------ |
| **bug 修复** | 修复了 seq 转换工具在失败时没有正确退出的问题。                                |
|              | 修复了设置 KickedToken 错误的问题。                                            |
|              | 修复了定时销毁信息错误的问题。                                                 |
|              | 修复了异常消息缺少时间，导致 SDK 异常的问题。                                  |
|              | 修复了撤回已经退出群聊成员的信息，会导致崩溃的问题。                           |
|              | 修复了用户设置定时销毁信息的时间单位不正确的问题。                             |
|              | 修复了 seq 转换工具没有在 docker 环境下被正确读取的问题。                      |
|              | 修复了离线推送推送错误和没有角标的问题。                                       |
|              | 修复了设置群信息没有正确通知到 SDK 的问题。                                    |
|              | 修复了管理员变更后排序错误的问题。                                             |
|              | 修复了加入群聊的通知类型不正确的问题。                                         |
| **功能优化** | 优化了 sendNotification 的传递方式，可以通过参数来选择是否携带发送信息的标识。 |
|              | 优化了 docker 中映射 mongo 备份文件夹，并优化了日志打印                        |
|              | 优化了批量获取增量群成员的方法。                                               |

## SDK v3.8.3-patch.3 更新内容

| **类别**     | **内容**                                               |
| ------------ | ------------------------------------------------------ |
| **bug 修复** | 修复了在较差网络环境时，异常消息可能重复的问题。       |
|              | 修复了会话 id 获取序列化的处理错误的问题。             |
|              | 修复了服务器崩溃或 req 缓存过期而导致消息间隙的问题。  |
|              | 修复了改变自己头像时，会话中的头像不会同步更新的问题。 |
|              | 修复了 seq 为 0 时，会导致同步失败的问题。             |
|              | 修复了获取群成员信息可能会失效的问题。                 |
|              | 修复了在服务器直接拉取的消息会重复的问题。             |
| **功能优化** | 优化了好友申请和群组申请过多时，会导致卡顿的问题。     |

## Chat v1.8.4-patch.2 更新内容

| **类别**     | **内容**                                             |
| ------------ | ---------------------------------------------------- |
| **bug 修复** | 修复了用户属性迁移工具，转换时无限循环的问题。       |
|              | 修复了获取缓存中的 AdminToken 可能会导致死锁的问题。 |
| **功能优化** | 优化了 proto gen，并使用了新版本的 grpc 生成工具。   |

---

# v3.8.3 (2025-1-10)

## Server v3.8.3 更新内容

| **类别**     | **内容**                                                                    |
| ------------ | --------------------------------------------------------------------------- |
| **新特性**   | 实现了 GetLastMessage 接口。                                                |
|              | 实现了同步 seq_user 的最大最小 seq 到 conversation 集合中用于 isEnd 判定    |
| **功能优化** | 优化了 Crontask 定时删除消息的实现。                                        |
|              | 将 upload log 接口的 `systemType` 字段改成 `AppFramework`                   |
|              | 优化的 RPC 调用的通用方法                                                   |
|              | 优化了消息缓存的逻辑                                                        |
|              | 优化了日志输出函数                                                          |
|              | 在 NotificationAccountInfo 结构体添加`AppMangerLevel`字段                   |
| **bug 修复** | 修复群成员头像设置无效。                                                    |
|              | 修复了打印 log.ZPanic 的问题。                                              |
|              | 修复了当 SDK 拉取信息时，Server 返回 isEnd 来控制拉取信息。                 |
|              | 修复了 rpc 发生 panic 时的恢复。                                            |
|              | 修复了设置 IsPrivateChat 时，修改其他字段不会生效。                         |
|              | 修复了当引用消息时，偶现的原消息被删除的问题。                              |
|              | 修复了关闭 `EnableHistoryForNewMembers`时，新成员仍能读到最后一条历史信息。 |
|              | 修复了 KickTokens 保存错误的问题。                                          |
|              | 修复了转发@消息到其他群中，造成异常会话生成的问题。                         |
|              | 修复了在线状态错误的问题。                                                  |
|              | 修复了服务发现和自动设置端口的错误                                          |
|              | 修复了 GetUsersOnline 时获取了错误的在线列表。                              |
| **其他**     | 更新了前端镜像的版本                                                        |

## SDK v3.8.3 更新内容

| **类别**     | **内容**                                                                    |
| ------------ | --------------------------------------------------------------------------- |
| **功能优化** | 添加参数来定位消息与方向拉取消息，避免 UI 数据干扰。                        |
|              | 优化了消息获取逻辑                                                          |
| **bug 修复** | 修复了当 chatlog 表名包含`-`时创建索引错误。                                |
|              | 修复了重装 APP 后，当前用户信息可能为空的问题。                             |
|              | 修复了当关键字为空时，搜索消息不会过滤语音消息。                            |
|              | 修复了当 APP 从后台打开或状态更新时，引用消息不会正确切换为撤销信息的错误。 |

## Chat v1.8.4 更新内容

| **类别**     | **内容**                                       |
| ------------ | ---------------------------------------------- |
| **新特性**   | 实现了管理后台的配置中心对应功能。             |
| **功能优化** | 优化了与 kubernetes 适配与对应服务的镜像生成。 |
|              | 优化了消息获取逻辑                             |
| **bug 修复** | 修复了 grpc 在 windows 时的连接内存泄漏。      |
|              | 修复了错误栈的打印问题。                       |

---

# 版本兼容性

| 模块       | 版本号 | 兼容版本                     |
| ---------- | ------ | ---------------------------- |
| **SDK**    | v3.8.3 | Server v3.8.3                |
| **Server** | v3.8.3 | SDK v3.8.2, SDK v3.8.3       |
| **Chat**   | v1.8.4 | Server v3.8.2, Server v3.8.3 |
